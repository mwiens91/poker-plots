head
  meta(name="viewport", content="width=device-width, initial-scale=1")
  meta(content="text/html;charset=utf-8", http-equiv="Content-Type")
  meta(content="utf-8", http-equiv="encoding")
  title poker plots
  // favicon
  link(
    rel="apple-touch-icon",
    sizes="180x180",
    href="favicon/apple-touch-icon.png"
  )
  link(
    rel="icon",
    type="image/png",
    sizes="32x32",
    href="favicon/favicon-32x32.png"
  )
  link(
    rel="icon",
    type="image/png",
    sizes="16x16",
    href="favicon/favicon-16x16.png"
  )
  link(rel="manifest", href="favicon/site.webmanifest")
  // bootstrap
  link(
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css",
    rel="stylesheet",
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3",
    crossorigin="anonymous"
  )
  script(
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js",
    type="text/javascript",
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p",
    crossorigin="anonymous"
  )
  // d3
  script(src="https://d3js.org/d3.v7.min.js", type="text/javascript")
  // css
  link(type="text/css", href="css/style.css", rel="stylesheet")
.container.pt-3
  - const parseCurrency = new Intl.NumberFormat("en-US", { style: "currency", currency: "USD" });
  .row.pt-3.text-center
    h1 people
    #people-grid.row.pt-3.pb-3(style={ "justify-content": "center" })
      // batch players into N groups
      - const N = 4;
      - let i, j;
      - let playersBatched = [];
      - for (i = 0, j = data.players.length; i < j; i += N) {playersBatched.push(data.players.slice(i, i + N))}
      each playersChunk in playersBatched
        .row.p-0.my-1
          each player in playersChunk
            // Make sure the number after "col" is 12 / N
            .col-3.p-0.g-0
              .player-card(
                id="player-card-" + player.name,
                style={ background: "linear-gradient(55deg, rgb(" + player.colourRgb + ") 0%, rgb(" + player.colourRgb.map((x) => x + (255 - x) * 0.4) + ") 60%)" }
              )
                .row.g-0.align-items-center
                  .col-md-4
                    img.img-fluid.avatar-circle(
                      src=player.avatar,
                      alt=player.name
                    )
                  .col-md-8
                    h5.card-title #{ player.name }
                    | #{ parseCurrency.format(player.cumSum) }
  .row.pt-5.text-center
    h1 cumulative sums multi-line chart
  .row
    #line-plot.col.text-center
  .row.mx-5
    #line-plot-avatar-div.col-2.py-1(style={ "text-align": "center" })
      img#line-plot-avatar.img-fluid.avatar-circle(
        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAABk0lEQVR4nO3SQQkAMAzAwPo3vaoIg3KnII/Mg8D8DuAmY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWiQWlnUTzYEi5dwAAAABJRU5ErkJggg=="
      )
    #line-plot-player-div.col-3.pt-2
      h3#line-plot-player
      #line-plot-amount
    #line-plot-game-div.col-7.pt-2
      h3#line-plot-game-title
      #line-plot-game-info
  .row.text-center(style={ "padding-top": "5rem" })
    h1 cumulative sums box plot
  .row
    #box-plot.col.text-center
  .row.pt-5.pb-3.text-center
    h1 games
  each game in data.games
    .row.pt-4(id="game-" + game.id)
      div
        - const theDate = new Date(game.date.replace(/-/g, "/"));
        h3= theDate.toLocaleDateString("en-US", { weekday: "long", year: "numeric", month: "long", day: "numeric" })
      div
        table.table(style={ "table-layout": "fixed" })
          thead
            tr
              th player
              th buy-in
              th buy-out
              th net
          tbody
            each playerData in game.data
              - const playerColour = data.players.filter((x) => x.name === playerData.player)[0].colourRgb.map((x) => x + (255 - x) * 0.8);
              tr(style={ background: "rgb(" + playerColour + ")" })
                th= playerData.player
                td= parseCurrency.format(playerData.buyin)
                td= parseCurrency.format(playerData.buyout)
                td= parseCurrency.format(playerData.delta)
  script(src="js/main.js", type="module")
