doctype html
head
  meta(name="viewport", content="width=device-width, initial-scale=1")
  meta(content="text/html;charset=utf-8", http-equiv="Content-Type")
  meta(content="utf-8", http-equiv="encoding")
  title poker plots
  // favicon
  link(
    rel="apple-touch-icon",
    sizes="180x180",
    href="favicon/apple-touch-icon.png"
  )
  link(
    rel="icon",
    type="image/png",
    sizes="32x32",
    href="favicon/favicon-32x32.png"
  )
  link(
    rel="icon",
    type="image/png",
    sizes="16x16",
    href="favicon/favicon-16x16.png"
  )
  link(rel="manifest", href="favicon/site.webmanifest")
  // Bootstrap
  link(
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css",
    rel="stylesheet",
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3",
    crossorigin="anonymous"
  )
  script(
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js",
    type="text/javascript",
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p",
    crossorigin="anonymous"
  )
  // D3
  script(src="https://d3js.org/d3.v7.min.js", type="text/javascript")
  // Fonts
  link(
    rel="stylesheet",
    href="https://fonts.googleapis.com/css?family=Caveat+Brush|Kalam"
  )
  // CSS
  link(type="text/css", href="css/style.css", rel="stylesheet")
.container.pt-3
  .row
    .col-6
      .d-flex.justify-content-center
        div(style={ width: "410px" })
          img(
            src="favicon/android-chrome-192x192.png",
            style={ height: "100px", width: "100px" }
          )
          p
            b poker plots
            |
            | generates a few interactive visualizations of our poker data. It also includes a log of all the games played.
            br
            br
            | Some interactive features of the plots might not be obvious on first use, so click below to see what's available.
          button.btn.btn-outline-primary(
            type="button",
            data-bs-toggle="collapse",
            data-bs-target="#collapseHelp",
            aria-expanded="false",
            aria-controls="collapseHelp"
          ) more info
          #collapseHelp.collapse.pt-4
            h2 More info
            h4 Terms
            ul
              li
                b cumulative sum:
                |
                | how much money a player has accumulated at a given point in time (abbreviated "cum-sum" sometimes)
              li
                b buy-in:
                |
                | the total amount of money a player brings into the
                | game
              li
                b buy-out:
                |
                | the amount of money a player leaves a game with
            h4 Features
            h5 People section
            ul
              li hovering over a player's avatar in the legend will show their info
            h5 Multi-line chart
            ul
              li hovering over a player's avatar in the legend above the plot will highlight their entire trajectory
              li hovering over a player's trajectory will highlight their entire trajectory
              li hovering over a player's data point will show the corresponding game's info in the info panel
              li clicking on a player's data point will scroll to the corresponding game in the games log
              li double-clicking anywhere will transform the x-axis from representing time to showing all games equally spaced (double-clicking again will revert this)
              li scrolling will zoom on the x-axis
              li dragging will pan on the x-axis
            h5 Box plot
            ul
              li hovering over a player's "box and whiskers" will show their corresponding extrema and quartiles
              li hovering over a player's outlier will show its value
            h5 Pie charts
            ul
              li hovering over a player's arc or label will show their current cumulative sum and their percentage share of the total winnings/losses
            h5 Games log
            ul
              li hovering over a cell will show the sum of buy-ins for the corresponding date
              li clicking on a cell will scroll to the corresponding game in the games log
              li a cell's intensity is proportional to (the square root of) the sum of buy-ins for the corresponding date
            h4 About
            | This page was written by Matt Wiens.#{ ' ' }
            a(href="https://d3js.org/") D3.js
            |
            | is used for data visualization and#{ ' ' }
            a(href="https://getbootstrap.com/") Bootstrap
            |
            | is used for styling. Ancient browsers and Safari might not be supported. Mobile is going to be a terrible experience. The source code for this page is available#{ ' ' }
            a(href="https://github.com/mwiens91/poker-plots") here
            | .
    .col-6
      .d-flex.justify-content-center.h-100
        .h-100(style={ width: "410px" })
          .d-flex.flex-column.justify-content-center.h-100
            div
              h2 Quick links
            .page-link-div
              | >
              button.btn.btn-link.p-1.ms-2(
                onclick="document.getElementById('people').scrollIntoView();"
              )
                | People
            .page-link-div
              | >
              button.btn.btn-link.p-1.ms-2(
                onclick="document.getElementById('line-chart').scrollIntoView();"
              )
                | Line chart
            .page-link-div
              | >
              button.btn.btn-link.p-1.ms-2(
                onclick="document.getElementById('box-plot').scrollIntoView();"
              )
                | Box plot
            .page-link-div
              | >
              button.btn.btn-link.p-1.ms-2(
                onclick="document.getElementById('pie-charts').scrollIntoView();"
              )
                | Pie charts
            .page-link-div
              | >
              button.btn.btn-link.p-1.ms-2(
                onclick="document.getElementById('games').scrollIntoView();"
              )
                | Games log
  - const parseCurrency = new Intl.NumberFormat("en-US", { style: "currency", currency: "USD" });
  #people.row.pt-5.text-center
    h1 People
  .row.pt-3.pb-3
    .col-6
      .d-flex.flex-row.justify-content-end.pt-2
        #people-body-parent-div(style={ width: "522px" })
          .d-flex.flex-row.align-items-center
            .pe-2
              img#people-body-avatar.img-fluid.people-body-avatar-circle(
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAABk0lEQVR4nO3SQQkAMAzAwPo3vaoIg3KnII/Mg8D8DuAmY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWiQWlnUTzYEi5dwAAAABJRU5ErkJggg=="
              )
            h1#people-body-player-title
              span#people-body-player-title-name placeholder
              | #{ ' ' }
              span#people-body-player-title-divider |
              | #{ ' ' }
              span#people-body-player-title-cumsum $xx.xx
          hr#people-body-hr(
            style={ width: "400px", height: "5px", opacity: "100%" }
          )
          .people-body-stat-title Games played:
          h3#people-body-games-played.people-body-stat-main xxx
          .people-body-stat-title Total money won:
          h3#people-body-total-money-won.people-body-stat-main $xx.xx
          .people-body-stat-title Total money lost:
          h3#people-body-total-money-lost.people-body-stat-main $xx.xx
          .people-body-stat-title Most money won in consecutive games:
          h3#people-body-most-money-won-consecutive-main.people-body-stat-main $xx.xx
          #people-body-most-money-won-consecutive-sub.people-body-stat-sub placeholder text
          .people-body-stat-title Most money lost in consecutive games:
          h3#people-body-most-money-lost-consecutive-main.people-body-stat-main $xx.xx
          #people-body-most-money-lost-consecutive-sub.people-body-stat-sub placeholder text
          .people-body-stat-title Most money won in a single game:
          h3#people-body-most-money-won-single-main.people-body-stat-main $xx.xx
          #people-body-most-money-won-single-sub.people-body-stat-sub placeholder text
          .people-body-stat-title Most money lost in a single game:
          h3#people-body-most-money-lost-single-main.people-body-stat-main $xx.xx
          #people-body-most-money-lost-single-sub.people-body-stat-sub placeholder text
    .col-6
      .d-flex.flex-row.justify-content-start
        div(style={ width: "522px" })
          .people-legend-mouseover-me-div ðŸ¡§ mouse-over these
          .people-legend-avatar-div
            each player in data.players
              .px-1.pt-1.pb-1(id="people-icon-div-" + player.name)
                img.people-legend-avatar-circle(
                  src=player.avatar,
                  alt=player.name,
                  style={ "border-color": player.colourHex }
                )
  #line-chart.row.pt-5.text-center
    h1 Cumulative sums multi-line chart
  .lineplot-legend-div.mx-5.pb-0.pt-4
    each player in data.players
      .px-2.pt-1.pb-0(id="legend-icon-div-" + player.name)
        img.lineplot-legend-avatar-circle(
          src=player.avatar,
          alt=player.name,
          style={ "border-color": player.colourHex }
        )
  .row
    #line-plot-parent.col.text-center
  .row.mx-5
    #line-plot-avatar-div.text-center.col-2.py-1
      img#line-plot-avatar.img-fluid.lineplot-infobar-avatar-circle(
        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAABk0lEQVR4nO3SQQkAMAzAwPo3vaoIg3KnII/Mg8D8DuAmY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWCWORMBYJY5EwFgljkTAWiQWlnUTzYEi5dwAAAABJRU5ErkJggg=="
      )
    #line-plot-player-div.col-3.pt-2
      h3#line-plot-player
      #line-plot-amount
    #line-plot-game-div.col-7.pt-2
      h3#line-plot-game-title
      #line-plot-game-info
  #box-plot.row.text-center(style={ "padding-top": "5rem" })
    h1 Cumulative sums box plot
  .row
    #box-plot-parent.col.text-center
  #pie-charts.row.pt-5.pb-4.text-center
    h1 Current cumulative sums pie charts
  .row.pt-4.text-center
    .col-6
      h2 Winners
      #winner-pie-chart-parent
    .col-6
      h2 Losers
      #loser-pie-chart-parent
  #games.row.pt-5.pb-3.text-center
    h1 Games
  #calendar.row.pt-3.pb-4
    #calendar-parent.col.text-center
  .container.fixed-top.d-flex.justify-content-center
    button#page-up-circle.page-up-circle(onclick="window.scrollTo(0,0)")
      | ^
  #scroll-up-visible
    each game in data.games
      .row.pt-4(id="game-" + game.id)
        div
          - const theDate = new Date(game.date.replace(/-/g, "/"));
          h3= theDate.toLocaleDateString("en-US", { timeZone: "UTC", weekday: "long", year: "numeric", month: "long", day: "numeric" })
        div
          table.table(style={ "table-layout": "fixed" })
            thead
              tr
                th player
                th buy-in
                th buy-out
                th net
            tbody
              each playerData in game.data
                - const playerColour = data.players.filter((x) => x.name === playerData.player)[0].colourRgb.map((x) => x + (255 - x) * 0.8);
                tr(
                  style={ background: "rgb(" + playerColour + ")", "border-color": "rgb(" + playerColour + ")" }
                )
                  th= playerData.player
                  td= parseCurrency.format(playerData.buyin)
                  td= parseCurrency.format(playerData.buyout)
                  td= parseCurrency.format(playerData.delta)
  // script(src="js/main.js", type="module")
  script(src="js/pokerplots.min.js", type="text/javascript")
